swagger: "2.0"
info:
 description: "Dashboard API."
 version: "1.0.0"
 title: "Dashboard API"
 termsOfService: "EUPL"
 contact:
   email: "emidio.stani@pwc.com"
 license:
   name: "EUPL"
   url: "https://joinup.ec.europa.eu/collection/eupl/eupl-text-11-12"
host: "localhost:8080"
basePath: "/api"
tags:
- name: "api"
  description: "dashboard api"
  externalDocs:
   description: "Find out more"
   url: "https://www.w3.org/TR/shacl/"
schemes:
- "http"
paths:
 /aggregatedReport:
   get:
     tags:
     - "api"
     summary: "Get Aggregated Report"
     description: "Get an aggregated report given the profile"
     operationId: "GetAggregatedReport"
     produces:
     - "application/json"
     - "application/xml"
     - "application/ld+json"
     - "application/x-jackson-smile"
     - "avro/binary"    
     - "application/cbor"
     - "application/protobuf"
     - "application/ion"
     - "application/msgpack"
     - "application/bson"
     parameters:
     - name: "profile"
       in: "query"
       description: "profile to be selected"
       required: false
       type: "string"
       enum:
         - "DCAT-AP-ASIP"
       default: "DCAT-AP-ASIP"
     responses:
       200:
         description: "successful operation"
         schema:
           $ref: "#/definitions/Report"
       400:
         description: "Invalid status value"
 /mostViolatedRules:
   get:
     tags:
     - "api"
     summary: "Most violated rules"
     description: "Get the most violated rules"
     operationId: "MostViolatedRules"
     produces:
     - "application/json"
     - "application/xml"
     parameters:
     - name: "profile"
       in: "query"
       description: "profile to be selected"
       required: false
       type: "string"
       enum:
         - "DCAT-AP-ASIP"
       default: "DCAT-AP-ASIP"
     responses:
       200:
         description: "successful operation"
         schema:
           $ref: "#/definitions/ListOfRules"
       400:
         description: "Invalid status value"
 /report:
   post:
      tags:
      - "api"
      summary: "Send Report"
      description: "Send report"
      operationId: "SendReport"
      consumes:
      - "text/turtle"
      produces:
      - "application/json"
      - "application/xml"
      parameters:
      - name: "profile"
        in: "query"
        description: "profile to be selected"
        required: false
        type: "string"
        enum:
         - "DCAT-AP-ASIP"
        default: "DCAT-AP-ASIP"
      - name: "body"
        in: "body"
        description: "Turtle representation of the report"
        required: true
        schema:
          $ref: "#/definitions/ttlReport"
      responses:
        405:
          description: "Invalid input"
definitions:
 ttlReport:
   type: "string"
 Report:
   type: "object"
   properties:
     violations:
       type: "array"
       items:
         $ref: "#/definitions/Violation"
       xml:
         name: "Violations"
         wrapped: true 
     warnings:
       type: "array"
       items:
         $ref: "#/definitions/Violation"
       xml:
         name: "Warnings"
         wrapped: true 
     info:
       type: "array"
       items:
         $ref: "#/definitions/Violation"
       xml:
         name: "Info"
         wrapped: true 
     dates:
       type: "array"
       items:
         $ref: "#/definitions/Date"
       xml:
         name: "ValidationResult"
         wrapped: true 
   xml:
     name: "Report"
 ListOfRules:
   type: "object"
   properties:
     violations:
       type: "array"
       items:
         $ref: "#/definitions/Rule"
       xml:
         name: "Rule"
         wrapped: true
   xml:
     name: "ListofRules"
 Rule:
   type: "object"
   properties:
     value:
       type: "integer"
       xml:
         name: "value"
     name: 
       type: "string"
       xml:
         name: "name"
   xml:
     name: "Rule"
 Violation:
   type: "integer"
   xml:
     name: "Violation"
 Date:
   type: "string"
   xml:
     name: "Date"
externalDocs:
 description: "Find out more about Swagger"
 url: "http://swagger.io"